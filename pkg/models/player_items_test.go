package models

import (
	"encoding/xml"
	"testing"

	"github.com/stretchr/testify/require"
)

func TestPlayerItems(t *testing.T) {
	xmlPlayerItems := `<items xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><Item xsi:type="FishingRod"><category>-99</category><name>Fishing Rod</name><specialItem>false</specialItem><hasBeenInInventory>true</hasBeenInInventory><SpecialVariable>0</SpecialVariable><DisplayName>Fiberglass Rod</DisplayName><Name>Fiberglass Rod</Name><Stack>1</Stack><initialParentTileIndex>10</initialParentTileIndex><currentParentTileIndex>10</currentParentTileIndex><indexOfMenuItemView>10</indexOfMenuItemView><stackable>false</stackable><instantUse>false</instantUse><upgradeLevel>2</upgradeLevel><numAttachmentSlots>2</numAttachmentSlots><attachments><Object xsi:nil="true" /><Object xsi:nil="true" /></attachments><BaseName>Fishing Rod</BaseName><InitialParentTileIndex>10</InitialParentTileIndex><IndexOfMenuItemView>10</IndexOfMenuItemView><InstantUse>false</InstantUse><Stackable>false</Stackable></Item><Item xsi:type="FishingRod"><category>-99</category><name>Fishing Rod</name><specialItem>false</specialItem><hasBeenInInventory>true</hasBeenInInventory><SpecialVariable>0</SpecialVariable><DisplayName>Bamboo Pole</DisplayName><Name>Bamboo Pole</Name><Stack>1</Stack><initialParentTileIndex>8</initialParentTileIndex><currentParentTileIndex>8</currentParentTileIndex><indexOfMenuItemView>8</indexOfMenuItemView><stackable>false</stackable><instantUse>false</instantUse><upgradeLevel>0</upgradeLevel><numAttachmentSlots>2</numAttachmentSlots><attachments><Object xsi:nil="true" /><Object xsi:nil="true" /></attachments><BaseName>Fishing Rod</BaseName><InitialParentTileIndex>8</InitialParentTileIndex><IndexOfMenuItemView>8</IndexOfMenuItemView><InstantUse>false</InstantUse><Stackable>false</Stackable></Item><Item xsi:type="Hat"><category>-95</category><name>Watermelon Band</name><specialItem>false</specialItem><hasBeenInInventory>true</hasBeenInInventory><SpecialVariable>0</SpecialVariable><DisplayName>Watermelon Band</DisplayName><Name>Watermelon Band</Name><Stack>1</Stack><which>30</which><skipHairDraw>true</skipHairDraw><ignoreHairstyleOffset>false</ignoreHairstyleOffset></Item><Item xsi:type="Hat"><category>-95</category><name>Tropiclip</name><specialItem>false</specialItem><hasBeenInInventory>false</hasBeenInInventory><SpecialVariable>0</SpecialVariable><DisplayName>Tropiclip</DisplayName><Name>Tropiclip</Name><Stack>1</Stack><which>13</which><skipHairDraw>true</skipHairDraw><ignoreHairstyleOffset>false</ignoreHairstyleOffset></Item><Item xsi:type="Hat"><category>-95</category><name>Tiara</name><specialItem>false</specialItem><hasBeenInInventory>false</hasBeenInInventory><SpecialVariable>0</SpecialVariable><DisplayName>Tiara</DisplayName><Name>Tiara</Name><Stack>1</Stack><which>26</which><skipHairDraw>true</skipHairDraw><ignoreHairstyleOffset>true</ignoreHairstyleOffset></Item><Item xsi:type="Hat"><category>-95</category><name>Tiara</name><specialItem>false</specialItem><hasBeenInInventory>true</hasBeenInInventory><SpecialVariable>0</SpecialVariable><DisplayName>Tiara</DisplayName><Name>Tiara</Name><Stack>1</Stack><which>26</which><skipHairDraw>true</skipHairDraw><ignoreHairstyleOffset>true</ignoreHairstyleOffset></Item><Item xsi:type="Hat"><category>-95</category><name>Straw Hat</name><specialItem>false</specialItem><hasBeenInInventory>true</hasBeenInInventory><SpecialVariable>0</SpecialVariable><DisplayName>Straw Hat</DisplayName><Name>Straw Hat</Name><Stack>1</Stack><which>4</which><skipHairDraw>false</skipHairDraw><ignoreHairstyleOffset>true</ignoreHairstyleOffset></Item><Item xsi:type="Hat"><category>-95</category><name>Sou'wester</name><specialItem>false</specialItem><hasBeenInInventory>true</hasBeenInInventory><SpecialVariable>0</SpecialVariable><DisplayName>Sou'wester</DisplayName><Name>Sou'wester</Name><Stack>1</Stack><which>28</which><skipHairDraw>false</skipHairDraw><ignoreHairstyleOffset>true</ignoreHairstyleOffset></Item><Item xsi:type="Hat"><category>-95</category><name>Santa Hat</name><specialItem>false</specialItem><hasBeenInInventory>true</hasBeenInInventory><SpecialVariable>0</SpecialVariable><DisplayName>Santa Hat</DisplayName><Name>Santa Hat</Name><Stack>1</Stack><which>25</which><skipHairDraw>false</skipHairDraw><ignoreHairstyleOffset>true</ignoreHairstyleOffset></Item><Item xsi:type="Hat"><category>-95</category><name>Sailor's Cap</name><specialItem>false</specialItem><hasBeenInInventory>true</hasBeenInInventory><SpecialVariable>0</SpecialVariable><DisplayName>Sailor's Cap</DisplayName><Name>Sailor's Cap</Name><Stack>1</Stack><which>17</which><skipHairDraw>false</skipHairDraw><ignoreHairstyleOffset>true</ignoreHairstyleOffset></Item><Item xsi:type="Hat"><category>-95</category><name>Polka Bow</name><specialItem>false</specialItem><hasBeenInInventory>true</hasBeenInInventory><SpecialVariable>0</SpecialVariable><DisplayName>Polka Bow</DisplayName><Name>Polka Bow</Name><Stack>1</Stack><which>22</which><skipHairDraw>true</skipHairDraw><ignoreHairstyleOffset>false</ignoreHairstyleOffset></Item><Item xsi:type="Hat"><category>-95</category><name>Official Cap</name><specialItem>false</specialItem><hasBeenInInventory>true</hasBeenInInventory><SpecialVariable>0</SpecialVariable><DisplayName>Official Cap</DisplayName><Name>Official Cap</Name><Stack>1</Stack><which>5</which><skipHairDraw>false</skipHairDraw><ignoreHairstyleOffset>true</ignoreHairstyleOffset></Item><Item xsi:type="Hat"><category>-95</category><name>Mouse Ears</name><specialItem>false</specialItem><hasBeenInInventory>true</hasBeenInInventory><SpecialVariable>0</SpecialVariable><DisplayName>Mouse Ears</DisplayName><Name>Mouse Ears</Name><Stack>1</Stack><which>31</which><skipHairDraw>true</skipHairDraw><ignoreHairstyleOffset>true</ignoreHairstyleOffset></Item><Item xsi:type="Hat"><category>-95</category><name>Earmuffs</name><specialItem>false</specialItem><hasBeenInInventory>false</hasBeenInInventory><SpecialVariable>0</SpecialVariable><DisplayName>Earmuffs</DisplayName><Name>Earmuffs</Name><Stack>1</Stack><which>11</which><skipHairDraw>true</skipHairDraw><ignoreHairstyleOffset>false</ignoreHairstyleOffset></Item><Item xsi:type="Hat"><category>-95</category><name>Delicate Bow</name><specialItem>false</specialItem><hasBeenInInventory>true</hasBeenInInventory><SpecialVariable>0</SpecialVariable><DisplayName>Delicate Bow</DisplayName><Name>Delicate Bow</Name><Stack>1</Stack><which>12</which><skipHairDraw>true</skipHairDraw><ignoreHairstyleOffset>false</ignoreHairstyleOffset></Item><Item xsi:type="Hat"><category>-95</category><name>Cowgal Hat</name><specialItem>false</specialItem><hasBeenInInventory>false</hasBeenInInventory><SpecialVariable>0</SpecialVariable><DisplayName>Cowgal Hat</DisplayName><Name>Cowgal Hat</Name><Stack>1</Stack><which>33</which><skipHairDraw>false</skipHairDraw><ignoreHairstyleOffset>true</ignoreHairstyleOffset></Item><Item xsi:type="Hat"><category>-95</category><name>Chicken Mask</name><specialItem>false</specialItem><hasBeenInInventory>false</hasBeenInInventory><SpecialVariable>0</SpecialVariable><DisplayName>Chicken Mask</DisplayName><Name>Chicken Mask</Name><Stack>1</Stack><which>10</which><skipHairDraw>true</skipHairDraw><ignoreHairstyleOffset>true</ignoreHairstyleOffset></Item><Item xsi:type="Hat"><category>-95</category><name>Cat Ears</name><specialItem>false</specialItem><hasBeenInInventory>true</hasBeenInInventory><SpecialVariable>0</SpecialVariable><DisplayName>Cat Ears</DisplayName><Name>Cat Ears</Name><Stack>1</Stack><which>32</which><skipHairDraw>true</skipHairDraw><ignoreHairstyleOffset>true</ignoreHairstyleOffset></Item><Item xsi:type="Hat"><category>-95</category><name>Blue Bonnet</name><specialItem>false</specialItem><hasBeenInInventory>false</hasBeenInInventory><SpecialVariable>0</SpecialVariable><DisplayName>Blue Bonnet</DisplayName><Name>Blue Bonnet</Name><Stack>1</Stack><which>6</which><skipHairDraw>false</skipHairDraw><ignoreHairstyleOffset>true</ignoreHairstyleOffset></Item><Item xsi:type="Hat"><category>-95</category><name>Plum Chapeau</name><specialItem>false</specialItem><hasBeenInInventory>true</hasBeenInInventory><SpecialVariable>0</SpecialVariable><DisplayName>Plum Chapeau</DisplayName><Name>Plum Chapeau</Name><Stack>1</Stack><which>7</which><skipHairDraw>false</skipHairDraw><ignoreHairstyleOffset>true</ignoreHairstyleOffset></Item><Item xsi:type="Hat"><category>-95</category><name>Cool Cap</name><specialItem>false</specialItem><hasBeenInInventory>true</hasBeenInInventory><SpecialVariable>0</SpecialVariable><DisplayName>Cool Cap</DisplayName><Name>Cool Cap</Name><Stack>1</Stack><which>20</which><skipHairDraw>false</skipHairDraw><ignoreHairstyleOffset>true</ignoreHairstyleOffset></Item><Item xsi:type="Hat"><category>-95</category><name>Bowler Hat</name><specialItem>false</specialItem><hasBeenInInventory>true</hasBeenInInventory><SpecialVariable>0</SpecialVariable><DisplayName>Bowler Hat</DisplayName><Name>Bowler Hat</Name><Stack>1</Stack><which>1</which><skipHairDraw>false</skipHairDraw><ignoreHairstyleOffset>true</ignoreHairstyleOffset></Item><Item xsi:type="Hat"><category>-95</category><name>Cone Hat</name><specialItem>false</specialItem><hasBeenInInventory>true</hasBeenInInventory><SpecialVariable>0</SpecialVariable><DisplayName>Cone Hat</DisplayName><Name>Cone Hat</Name><Stack>1</Stack><which>39</which><skipHairDraw>false</skipHairDraw><ignoreHairstyleOffset>true</ignoreHairstyleOffset></Item><Item xsi:type="Hat"><category>-95</category><name>Trucker Hat</name><specialItem>false</specialItem><hasBeenInInventory>true</hasBeenInInventory><SpecialVariable>0</SpecialVariable><DisplayName>Trucker Hat</DisplayName><Name>Trucker Hat</Name><Stack>1</Stack><which>16</which><skipHairDraw>false</skipHairDraw><ignoreHairstyleOffset>true</ignoreHairstyleOffset></Item><Item xsi:type="Hat"><category>-95</category><name>Good Ol' Cap</name><specialItem>false</specialItem><hasBeenInInventory>true</hasBeenInInventory><SpecialVariable>0</SpecialVariable><DisplayName>Good Ol' Cap</DisplayName><Name>Good Ol' Cap</Name><Stack>1</Stack><which>18</which><skipHairDraw>false</skipHairDraw><ignoreHairstyleOffset>true</ignoreHairstyleOffset></Item><Item xsi:type="Hat"><category>-95</category><name>Fedora</name><specialItem>false</specialItem><hasBeenInInventory>true</hasBeenInInventory><SpecialVariable>0</SpecialVariable><DisplayName>Fedora</DisplayName><Name>Fedora</Name><Stack>1</Stack><which>19</which><skipHairDraw>false</skipHairDraw><ignoreHairstyleOffset>true</ignoreHairstyleOffset></Item><Item xsi:type="Hat"><category>-95</category><name>Daisy</name><specialItem>false</specialItem><hasBeenInInventory>true</hasBeenInInventory><SpecialVariable>0</SpecialVariable><DisplayName>Daisy</DisplayName><Name>Daisy</Name><Stack>1</Stack><which>29</which><skipHairDraw>true</skipHairDraw><ignoreHairstyleOffset>false</ignoreHairstyleOffset></Item></items>`
	var items PlayerItems

	err := xml.Unmarshal([]byte(xmlPlayerItems), &items)

	require.NoError(t, err)
	require.Len(t, items.Items, 27)
	item := items.Items[0]
	require.Equal(t, "FishingRod", item.Type)
	require.Equal(t, -99, item.Category)
	require.Equal(t, "Fishing Rod", item.Name)
	require.Equal(t, false, item.SpecialItem)
	require.Equal(t, true, item.HasBeenInInventory)
	require.Equal(t, 0, item.SpecialVariable)
	require.Equal(t, "Fiberglass Rod", item.DisplayName)
	require.Equal(t, "Fiberglass Rod", item.SpecificName)
	require.Equal(t, 1, item.Stack)
	require.Equal(t, 10, item.InitialParentTileIndex)
	require.Equal(t, 10, item.CurrentParentTileIndex)
	require.Equal(t, 10, item.IndexOfMenuItemView)
	require.Equal(t, false, item.Stackable)
	require.Equal(t, false, item.InstantUse)
	require.Equal(t, 2, item.UpgradeLevel)
	require.Equal(t, 2, item.NumAttachmentSlots)
	require.Equal(t, "Fishing Rod", item.BaseName)
	require.Equal(t, 10, item.InitialParentTileIndex)
	require.Equal(t, 10, item.IndexOfMenuItemView)
	require.Equal(t, false, item.InstantUse)
	require.Equal(t, false, item.Stackable)
}
